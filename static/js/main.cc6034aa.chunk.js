(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{112:function(e,t,a){e.exports=a(142)},117:function(e,t,a){},118:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c);a(117),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,l,u=a(13),s=(a(118),a(194)),d=a(195),f=a(186),m=a(145),b=a(144),E=a(99),O=a.n(E),p=a(197),g=a(196),T=a(16),h=a(199),k=a(202),v=a(12),j=a(90),I=a.n(j).a.create(Object(v.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"ec5b15d4-74e9-420d-8187-76eec8294de7"}})),D=function(){return I.get("todo-lists")},S=function(e){return I.post("todo-lists",{title:e})},C=function(e){return I.delete("todo-lists/".concat(e))},_=function(e,t){return I.put("todo-lists/".concat(e),{title:t})},y=function(e){return I.get("todo-lists/".concat(e,"/tasks"))},A=function(e,t){return I.post("todo-lists/".concat(e,"/tasks"),{title:t})},w=function(e,t){return I.delete("todo-lists/".concat(e,"/tasks/").concat(t))},L=function(e,t,a){return I.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},P=function(){return I.get("/auth/me")},N=function(e){return I.post("/auth/login",e)},R=function(){return I.delete("/auth/login")},G=function(e,t){t(x("failed")),e.messages&&e.messages.length?t(F(e.messages[0])):t(F("Oops, some error occurred"))},V=function(e,t){t(F(e.message)),t(x("failed"))},K=function(e){return{type:"LOGIN/SET_IS_LOGGED_IN",value:e}},x=function(e){return{type:"APP/SET_STATUS",status:e}},F=function(e){return{type:"APP/SET_ERROR",error:e}},M=function(e){return{type:"APP/SET_INITIALIZED",value:e}},U=function(e){return r.a.createElement(h.a,Object.assign({elevation:6,variant:"filled"},e))},H=function(){var e=Object(T.c)((function(e){return e.app.error})),t=Object(T.b)(),a=function(e,a){"clickaway"!==a&&t(F(null))};return r.a.createElement(k.a,{open:null!==e,autoHideDuration:1e4,onClose:a},r.a.createElement(U,{onClose:a,severity:"error"},e))},Z=a(190),q=a(44),z=a(95),B=a.n(z),J=a(198),W=a(203),$=r.a.memo((function(e){var t=e.addItem,a=Object(n.useState)(""),c=Object(q.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(null),u=Object(q.a)(l,2),s=u[0],d=u[1],m=Object(n.useCallback)((function(){var e=o.trim();e?(t(e),i("")):d("Title is required")}),[o,t]);return r.a.createElement("div",null,r.a.createElement(J.a,{id:"outlined-basic",label:"Title",variant:"outlined",value:o,error:!!s,helperText:s,onChange:function(e){i(e.currentTarget.value)},onKeyPress:function(e){s&&d(null),13===e.charCode&&m()},disabled:e.disabled}),r.a.createElement(W.a,{title:"Add","aria-label":"add"},r.a.createElement(f.a,{"aria-label":"delete",onClick:m,disabled:e.disabled},r.a.createElement(B.a,{color:"action"}))))})),Q=r.a.memo((function(e){var t=e.value,a=e.changeValue,c=Object(n.useState)(!1),o=Object(q.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)(e.value),s=Object(q.a)(u,2),d=s[0],f=s[1],m=Object(n.useCallback)((function(){l(!1),d.trim()?a(d):a(t)}),[a,t,d]);return r.a.createElement(r.a.Fragment,null,i?r.a.createElement(J.a,{value:d,onChange:function(e){return f(e.currentTarget.value)},onKeyPress:function(e){e.ctrlKey&&13===e.charCode&&m()},onBlur:m,autoFocus:!0}):r.a.createElement("span",{onDoubleClick:function(){return l(!0)}},e.value))})),Y=a(63),X=a.n(Y),ee=a(189),te=a(143),ae=a(71),ne=a.n(ae),re=a(96),ce=a.n(re),oe=a(200);!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(i||(i={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(l||(l={}));var ie=r.a.memo((function(e){var t=e.todoID,a=e.task,c=e.removeTask,o=e.changeTaskStatus,l=e.changeTaskTitle,u=Object(n.useCallback)((function(e){var n=e.currentTarget.checked?i.Completed:i.New;o(t,a.id,n)}),[t,a.id,o]),s=Object(n.useCallback)((function(){return c(t,a.id)}),[t,a.id,c]),d=Object(n.useCallback)((function(e){return l(t,a.id,e)}),[t,a.id,l]);return r.a.createElement("div",{className:ce.a.task},r.a.createElement(oe.a,{color:"primary",checked:a.status===i.Completed,onChange:u}),r.a.createElement(Q,{value:a.title,changeValue:d}),r.a.createElement(f.a,{"aria-label":"delete",onClick:s},r.a.createElement(X.a,{color:"action"})))})),le=function(e,t,a){return function(n,r){var c=r().tasks[e].find((function(e){return e.id===t}));if(c){var o=Object(v.a)({title:c.title,status:c.status,priority:c.priority,startDate:c.startDate,deadline:c.deadline,description:c.description},a);n(x("loading")),L(e,t,o).then((function(a){0===a.data.resultCode?(n(function(e,t,a){return{type:"UPDATE_TASK",todoID:e,taskID:t,model:a}}(e,t,o)),n(x("succeeded"))):G(a.data,n)})).catch((function(e){G(e,n)}))}else console.warn("task not found in the state")}},ue=r.a.memo((function(e){var t=e.todoID,a=e.addTask,c=e.filter,o=e.changeFilter,l=e.removeTodo,u=e.changeTodoTitle,s=Object(T.b)();Object(n.useEffect)((function(){s(function(e){return function(t){t(x("loading")),y(e).then((function(a){a.data.error?a.data.error?t(F(a.data.error)):t(F("Oops, some error occurred")):(t(function(e,t){return{type:"SET_TASKS",todoID:e,tasks:t}}(e,a.data.items)),t(x("succeeded")))})).catch((function(e){V(e,t)}))}}(t))}),[]);var d,m=Object(n.useCallback)((function(e){return a(t,e)}),[t,a]),E=Object(n.useCallback)((function(e){return o(t,e)}),[t,o]),O=Object(n.useCallback)((function(){return l(t)}),[t,l]),p=Object(n.useCallback)((function(e){return u(t,e)}),[t,u]),g=Object(n.useCallback)((function(e){return c===e?"contained":"outlined"}),[c]);switch(c){case"active":d=e.tasks.filter((function(e){return e.status===i.New}));break;case"completed":d=e.tasks.filter((function(e){return e.status===i.Completed}));break;default:d=e.tasks}return r.a.createElement(te.a,{elevation:3,variant:"outlined",className:ne.a.todo},r.a.createElement("h3",null,r.a.createElement(Q,{value:e.title,changeValue:p}),r.a.createElement(f.a,{"aria-label":"delete",onClick:O,disabled:"loading"===e.entityStatus},r.a.createElement(X.a,{color:"action"}))),r.a.createElement("div",null,r.a.createElement($,{addItem:m,disabled:"loading"===e.entityStatus})),d.map((function(t){return r.a.createElement(ie,{key:t.id,todoID:e.todoID,task:t,removeTask:e.removeTask,changeTaskStatus:e.changeTaskStatus,changeTaskTitle:e.changeTaskTitle})})),r.a.createElement("div",null,r.a.createElement(ee.a,{color:"primary","aria-label":"filter button group",className:ne.a.btnGroup},r.a.createElement(b.a,{onClick:function(){return E("all")},variant:g("all")},"All"),r.a.createElement(b.a,{onClick:function(){return E("active")},variant:g("active")},"Active"),r.a.createElement(b.a,{onClick:function(){return E("completed")},variant:g("completed")},"Completed"))))})),se=function(){var e=Object(T.c)((function(e){return e.todos})),t=Object(T.c)((function(e){return e.tasks})),a=Object(T.c)((function(e){return e.auth.isLoggedIn})),c=Object(T.b)();Object(n.useEffect)((function(){a&&c((function(e){e(x("loading")),D().then((function(t){e({type:"SET_TODOS",todos:t.data}),e(x("succeeded"))})).catch((function(t){V(t,e)}))}))}),[]);var o=Object(n.useCallback)((function(e){return c(function(e){return function(t){t(x("loading")),S(e).then((function(e){0===e.data.resultCode?(t({type:"ADD_TODO",todo:e.data.data.item}),t(x("succeeded"))):G(e.data,t)})).catch((function(e){V(e,t)}))}}(e))}),[c]),i=Object(n.useCallback)((function(e){return c(function(e){return function(t){t(x("loading")),t(function(e,t){return{type:"TODO/SET_ENTITE_STATUS",todoID:e,status:t}}(e,"loading")),C(e).then((function(a){0===a.data.resultCode?(t(function(e){return{type:"REMOVE_TODO",todoID:e}}(e)),t(x("succeeded"))):G(a.data,t)})).catch((function(e){V(e,t)}))}}(e))}),[c]),l=Object(n.useCallback)((function(e,t){return c(function(e,t){return function(a){a(x("loading")),_(e,t).then((function(n){0===n.data.resultCode?(a(function(e,t){return{type:"CHANGE_TITLE_TODO",todoID:e,newValue:t}}(e,t)),a(x("succeeded"))):G(n.data,a)})).catch((function(e){V(e,a)}))}}(e,t))}),[c]),s=Object(n.useCallback)((function(e,t){return c(function(e,t){return{type:"CHANGE_FILTER_TODO",todoID:e,newValue:t}}(e,t))}),[c]),d=Object(n.useCallback)((function(e,t){return c(function(e,t){return function(a){a(x("loading")),A(e,t).then((function(e){0===e.data.resultCode?(a({type:"ADD_TASK",task:e.data.data.item}),a(x("succeeded"))):G(e.data,a)})).catch((function(e){G(e,a)}))}}(e,t))}),[c]),f=Object(n.useCallback)((function(e,t){return c(function(e,t){return function(a){a(x("loading")),w(e,t).then((function(n){0===n.data.resultCode?(a(function(e,t){return{type:"REMOVE_TASK",todoID:e,taskID:t}}(e,t)),a(x("succeeded"))):G(n.data,a)})).catch((function(e){V(e,a)}))}}(e,t))}),[c]),m=Object(n.useCallback)((function(e,t,a){return c(le(e,t,{status:a}))}),[c]),b=Object(n.useCallback)((function(e,t,a){return c(le(e,t,{title:a}))}),[c]);return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{container:!0,style:{padding:"10px"}},r.a.createElement($,{addItem:o})),r.a.createElement(Z.a,{container:!0,spacing:3},e.map((function(e){var a=t[e.id];return r.a.createElement(Z.a,{item:!0,key:e.id},r.a.createElement(ue,{todoID:e.id,entityStatus:e.entityStatus,title:e.title,filter:e.filter,tasks:a,removeTodo:i,changeTodoTitle:l,addTask:d,changeFilter:s,changeTaskStatus:m,removeTask:f,changeTaskTitle:b}))})))):r.a.createElement(u.a,{to:"/login"})},de=a(204),fe=a(187),me=a(191),be=a(192),Ee=a(101),Oe=function(e){var t={};return e.password||(t.password="Required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},pe=function(){var e=Object(T.c)((function(e){return e.auth.isLoggedIn})),t=Object(T.b)(),a=Object(Ee.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:Oe,onSubmit:function(e){var a;t((a=e,function(e){e(x("loading")),N(a).then((function(t){0===t.data.resultCode?(e(x("succeeded")),e(K(!0))):G(t.data,e)})).catch((function(t){V(t,e)}))}))}});return e?r.a.createElement(u.a,{to:"/todo"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{container:!0,justify:"center"},r.a.createElement(Z.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement(de.a,null,r.a.createElement(fe.a,null,r.a.createElement("p",null,"To log in get registered "," ",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(me.a,null,r.a.createElement(J.a,Object.assign({label:"Email",margin:"normal",error:!!a.errors.email,helperText:a.errors.email},a.getFieldProps("email"))),r.a.createElement(J.a,Object.assign({type:"password",label:"Password",margin:"normal",error:!!a.errors.password,helperText:a.errors.password},a.getFieldProps("password"))),r.a.createElement(be.a,Object.assign({label:"Remember me",control:r.a.createElement(oe.a,null)},a.getFieldProps("rememberMe"))),r.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary"},"Login")))))))},ge=a(193);var Te=function(){var e=Object(T.c)((function(e){return e.app.status})),t=Object(T.c)((function(e){return e.app.isInitialized})),a=Object(T.c)((function(e){return e.auth.isLoggedIn})),c=Object(T.b)();return Object(n.useEffect)((function(){c((function(e){P().then((function(t){e(M(!0)),e(x("loading")),0===t.data.resultCode?e(K(!0)):e(x("failed"))})).catch((function(t){e(M(!0)),V(t,e)}))}))}),[]),t?r.a.createElement("div",{className:"App"},r.a.createElement(s.a,{position:"static"},r.a.createElement(d.a,null,r.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(O.a,null)),r.a.createElement(m.a,{variant:"h6"},"Todo"),a&&r.a.createElement(b.a,{color:"inherit",onClick:function(){c((function(e){e(x("loading")),R().then((function(t){0===t.data.resultCode?(e(K(!1)),e(x("succeeded"))):G(t.data,e)})).catch((function(t){V(t,e)}))}))}},"Logout")),"loading"===e&&r.a.createElement(g.a,{style:{position:"absolute",top:"0",width:"100%"}})),r.a.createElement(p.a,{fixed:!0},r.a.createElement(u.a,{from:"/",to:"/todo"}),r.a.createElement(u.b,{path:"/todo",render:function(){return r.a.createElement(se,null)}}),r.a.createElement(u.b,{path:"/login",render:function(){return r.a.createElement(pe,null)}})),r.a.createElement(H,null)):r.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},r.a.createElement(ge.a,null))},he=a(41),ke=a(100),ve={status:"idle",error:null,isInitialized:!1},je={isLoggedIn:!1},Ie=a(67),De=[],Se=a(39),Ce={},_e=Object(he.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET_STATUS":return Object(v.a)({},e,{status:t.status});case"APP/SET_ERROR":return Object(v.a)({},e,{error:t.error});case"APP/SET_INITIALIZED":return Object(v.a)({},e,{isInitialized:t.value});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN/SET_IS_LOGGED_IN":return Object(v.a)({},e,{isLoggedIn:t.value});default:return e}},todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TODOS":return t.todos.map((function(e){return Object(v.a)({},e,{filter:"all",entityStatus:"idle"})}));case"ADD_TODO":return[Object(v.a)({},t.todo,{filter:"all",entityStatus:"idle"})].concat(Object(Ie.a)(e));case"REMOVE_TODO":return e.filter((function(e){return e.id!==t.todoID}));case"CHANGE_TITLE_TODO":return e.map((function(e){return e.id===t.todoID?Object(v.a)({},e,{title:t.newValue}):e}));case"CHANGE_FILTER_TODO":return e.map((function(e){return e.id===t.todoID?Object(v.a)({},e,{filter:t.newValue}):e}));case"TODO/SET_ENTITE_STATUS":return e.map((function(e){return e.id===t.todoID?Object(v.a)({},e,{entityStatus:t.status}):e}));default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TODOS":var a=Object(v.a)({},e);return t.todos.forEach((function(e){return a[e.id]=[]})),a;case"SET_TASKS":var n=Object(v.a)({},e);return n[t.todoID]=t.tasks,n;case"ADD_TASK":var r=t.task;return Object(v.a)({},e,Object(Se.a)({},t.task.todoListId,[r].concat(Object(Ie.a)(e[t.task.todoListId]))));case"REMOVE_TASK":return Object(v.a)({},e,Object(Se.a)({},t.todoID,e[t.todoID].filter((function(e){return e.id!==t.taskID}))));case"UPDATE_TASK":return Object(v.a)({},e,Object(Se.a)({},t.todoID,e[t.todoID].map((function(e){return e.id!==t.taskID?e:Object(v.a)({},e,{},t.model)}))));case"ADD_TODO":return Object(v.a)({},e,Object(Se.a)({},t.todo.id,[]));case"REMOVE_TODO":return delete e[t.todoID],Object(v.a)({},e);default:return e}}}),ye=Object(he.d)(_e,Object(he.a)(ke.a)),Ae=a(48);o.a.render(r.a.createElement(T.a,{store:ye},r.a.createElement(Ae.a,null,r.a.createElement(Te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){e.exports={todo:"Todolist_todo__1Eyvk",btnGroup:"Todolist_btnGroup__3u4Qu"}},96:function(e,t,a){e.exports={task:"Task_task__2p58y"}}},[[112,1,2]]]);
//# sourceMappingURL=main.cc6034aa.chunk.js.map