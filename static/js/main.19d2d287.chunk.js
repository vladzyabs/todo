(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{116:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(9),c=a.n(o);a(92),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(93);var u,i,l=a(33),s=a(72),d=a.n(s),f=a(153),m=a(160),b=a(163),O=r.a.memo((function(t){var e=t.addItem,a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],u=o[1],i=Object(n.useState)(null),s=Object(l.a)(i,2),O=s[0],k=s[1],E=Object(n.useCallback)((function(){var t=c.trim();t?(e(t),u("")):k("Title is required")}),[c,e]);return r.a.createElement("div",null,r.a.createElement(m.a,{id:"outlined-basic",label:"Title",variant:"outlined",value:c,error:!!O,helperText:O,onChange:function(t){u(t.currentTarget.value)},onKeyPress:function(t){O&&k(null),13===t.charCode&&E()}}),r.a.createElement(b.a,{title:"Add","aria-label":"add"},r.a.createElement(f.a,{"aria-label":"delete",onClick:E},r.a.createElement(d.a,{color:"action"}))))})),k=r.a.memo((function(t){var e=t.value,a=t.changeValue,o=Object(n.useState)(!1),c=Object(l.a)(o,2),u=c[0],i=c[1],s=Object(n.useState)(t.value),d=Object(l.a)(s,2),f=d[0],b=d[1],O=Object(n.useCallback)((function(){i(!1),f.trim()?a(f):a(e)}),[a,e,f]);return r.a.createElement(r.a.Fragment,null,u?r.a.createElement(m.a,{value:f,onChange:function(t){return b(t.currentTarget.value)},onKeyPress:function(t){t.ctrlKey&&13===t.charCode&&O()},onBlur:O,autoFocus:!0}):r.a.createElement("span",{onDoubleClick:function(){return i(!0)}},t.value))})),E=a(46),T=a.n(E),p=a(118),v=a(154),h=a(117),j=a(51),D=a.n(j),C=a(73),g=a.n(C),I=a(161);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(u||(u={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={}));var _=r.a.memo((function(t){var e=t.todoID,a=t.task,o=t.removeTask,c=t.changeTaskStatus,i=t.changeTaskTitle,l=Object(n.useCallback)((function(t){var n=t.currentTarget.checked?u.Completed:u.New;c(e,a.id,n)}),[e,a.id,c]),s=Object(n.useCallback)((function(){return o(e,a.id)}),[e,a.id,o]),d=Object(n.useCallback)((function(t){return i(e,a.id,t)}),[e,a.id,i]);return r.a.createElement("div",{className:g.a.task},r.a.createElement(I.a,{color:"primary",checked:a.status===u.Completed,onChange:l}),r.a.createElement(k,{value:a.title,changeValue:d}),r.a.createElement(f.a,{"aria-label":"delete",onClick:s},r.a.createElement(T.a,{color:"action"})))})),y=a(23),S=a(12),w=a(75),A=a.n(w).a.create(Object(S.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"ec5b15d4-74e9-420d-8187-76eec8294de7"}})),K=function(){return A.get("todo-lists")},L=function(t){return A.post("todo-lists",{title:t})},N=function(t){return A.delete("todo-lists/".concat(t))},V=function(t,e){return A.put("todo-lists/".concat(t),{title:e})},R=function(t){return A.get("todo-lists/".concat(t,"/tasks"))},G=function(t,e){return A.post("todo-lists/".concat(t,"/tasks"),{title:e})},M=function(t,e){return A.delete("todo-lists/".concat(t,"/tasks/").concat(e))},P=function(t,e,a){return A.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},x=function(t,e,a){return function(n,r){var o=r().tasks[t].find((function(t){return t.id===e}));if(o){var c=Object(S.a)({title:o.title,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline,description:o.description},a);P(t,e,c).then((function(a){0===a.data.resultCode&&n(function(t,e,a){return{type:"UPDATE_TASK",todoID:t,taskID:e,model:a}}(t,e,c))}))}else console.warn("task not found in the state")}},F=r.a.memo((function(t){var e=t.todoID,a=t.addTask,o=t.filter,c=t.changeFilter,i=t.removeTodo,l=t.changeTodoTitle,s=Object(y.b)();Object(n.useEffect)((function(){s(function(t){return function(e){R(t).then((function(a){e(function(t,e){return{type:"SET_TASKS",todoID:t,tasks:e}}(t,a.data.items))}))}}(e))}),[s,e]);var d,m=Object(n.useCallback)((function(t){return a(e,t)}),[e,a]),b=Object(n.useCallback)((function(t){return c(e,t)}),[e,c]),E=Object(n.useCallback)((function(){return i(e)}),[e,i]),j=Object(n.useCallback)((function(t){return l(e,t)}),[e,l]),C=Object(n.useCallback)((function(t){return o===t?"contained":"outlined"}),[o]);switch(o){case"active":d=t.tasks.filter((function(t){return t.status===u.New}));break;case"completed":d=t.tasks.filter((function(t){return t.status===u.Completed}));break;default:d=t.tasks}return r.a.createElement(h.a,{elevation:3,variant:"outlined",className:D.a.todo},r.a.createElement("h3",null,r.a.createElement(k,{value:t.title,changeValue:j}),r.a.createElement(f.a,{"aria-label":"delete",onClick:E},r.a.createElement(T.a,{color:"action"}))),r.a.createElement("div",null,r.a.createElement(O,{addItem:m})),d.map((function(e){return r.a.createElement(_,{key:e.id,todoID:t.todoID,task:e,removeTask:t.removeTask,changeTaskStatus:t.changeTaskStatus,changeTaskTitle:t.changeTaskTitle})})),r.a.createElement("div",null,r.a.createElement(v.a,{color:"primary","aria-label":"filter button group",className:D.a.btnGroup},r.a.createElement(p.a,{onClick:function(){return b("all")},variant:C("all")},"All"),r.a.createElement(p.a,{onClick:function(){return b("active")},variant:C("active")},"Active"),r.a.createElement(p.a,{onClick:function(){return b("completed")},variant:C("completed")},"Completed"))))})),H=a(155),U=a(156),B=a(157),J=a(76),W=a.n(J),q=a(158),Q=a(159),Y=function(t){K().then((function(e){t({type:"SET_TODOS",todos:e.data})}))};var $=function(){var t=Object(y.c)((function(t){return t.todos})),e=Object(y.c)((function(t){return t.tasks})),a=Object(y.b)();Object(n.useEffect)((function(){a(Y)}),[a]);var o=Object(n.useCallback)((function(t){return a(function(t){return function(e){L(t).then((function(t){0===t.data.resultCode&&e({type:"ADD_TODO",todo:t.data.data.item})}))}}(t))}),[a]),c=Object(n.useCallback)((function(t){return a(function(t){return function(e){N(t).then((function(a){0===a.data.resultCode&&e(function(t){return{type:"REMOVE_TODO",todoID:t}}(t))}))}}(t))}),[a]),u=Object(n.useCallback)((function(t,e){return a(function(t,e){return function(a){V(t,e).then((function(n){0===n.data.resultCode&&a(function(t,e){return{type:"CHANGE_TITLE_TODO",todoID:t,newValue:e}}(t,e))}))}}(t,e))}),[a]),i=Object(n.useCallback)((function(t,e){return a(function(t,e){return{type:"CHANGE_FILTER_TODO",todoID:t,newValue:e}}(t,e))}),[a]),l=Object(n.useCallback)((function(t,e){return a(function(t,e){return function(a){G(t,e).then((function(t){0===t.data.resultCode&&a({type:"ADD_TASK",task:t.data.data.item})}))}}(t,e))}),[a]),s=Object(n.useCallback)((function(t,e){return a(function(t,e){return function(a){M(t,e).then((function(n){0===n.data.resultCode&&a(function(t,e){return{type:"REMOVE_TASK",todoID:t,taskID:e}}(t,e))}))}}(t,e))}),[a]),d=Object(n.useCallback)((function(t,e,n){return a(x(t,e,{status:n}))}),[a]),m=Object(n.useCallback)((function(t,e,n){return a(x(t,e,{title:n}))}),[a]);return r.a.createElement("div",{className:"App"},r.a.createElement(H.a,{position:"static"},r.a.createElement(U.a,null,r.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(W.a,null)),r.a.createElement(B.a,{variant:"h6"},"Todo"),r.a.createElement(p.a,{color:"inherit"},"Login"))),r.a.createElement(q.a,{fixed:!0},r.a.createElement(Q.a,{container:!0,style:{padding:"10px"}},r.a.createElement(O,{addItem:o})),r.a.createElement(Q.a,{container:!0,spacing:3},t.map((function(t){var a=e[t.id];return r.a.createElement(Q.a,{item:!0,key:t.id},r.a.createElement(F,{todoID:t.id,title:t.title,filter:t.filter,tasks:a,removeTodo:c,changeTodoTitle:u,addTask:l,changeFilter:i,changeTaskStatus:d,removeTask:s,changeTaskTitle:m}))})))))},z=a(32),X=a(77),Z=a(48),tt=[],et=a(28),at={},nt=Object(z.c)({todos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TODOS":return e.todos.map((function(t){return Object(S.a)({},t,{filter:"all"})}));case"ADD_TODO":return[Object(S.a)({},e.todo,{filter:"all"})].concat(Object(Z.a)(t));case"REMOVE_TODO":return t.filter((function(t){return t.id!==e.todoID}));case"CHANGE_TITLE_TODO":return t.map((function(t){return t.id===e.todoID?Object(S.a)({},t,{title:e.newValue}):t}));case"CHANGE_FILTER_TODO":return t.map((function(t){return t.id===e.todoID?Object(S.a)({},t,{filter:e.newValue}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TODOS":var a=Object(S.a)({},t);return e.todos.forEach((function(t){return a[t.id]=[]})),a;case"SET_TASKS":var n=Object(S.a)({},t);return n[e.todoID]=e.tasks,n;case"ADD_TASK":var r=e.task;return Object(S.a)({},t,Object(et.a)({},e.task.todoListId,[r].concat(Object(Z.a)(t[e.task.todoListId]))));case"REMOVE_TASK":return Object(S.a)({},t,Object(et.a)({},e.todoID,t[e.todoID].filter((function(t){return t.id!==e.taskID}))));case"UPDATE_TASK":return Object(S.a)({},t,Object(et.a)({},e.todoID,t[e.todoID].map((function(t){return t.id!==e.taskID?t:Object(S.a)({},t,{},e.model)}))));case"ADD_TODO":return Object(S.a)({},t,Object(et.a)({},e.todo.id,[]));case"REMOVE_TODO":return delete t[e.todoID],Object(S.a)({},t);default:return t}}}),rt=Object(z.d)(nt,Object(z.a)(X.a));c.a.render(r.a.createElement(y.a,{store:rt},r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},51:function(t,e,a){t.exports={todo:"Todolist_todo__1Eyvk",btnGroup:"Todolist_btnGroup__3u4Qu"}},73:function(t,e,a){t.exports={task:"Task_task__2p58y"}},87:function(t,e,a){t.exports=a(116)},92:function(t,e,a){},93:function(t,e,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.19d2d287.chunk.js.map